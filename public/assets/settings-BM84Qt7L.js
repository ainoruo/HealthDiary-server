import"./style-NmStaRgG.js";import{s as o}from"./toast-B-6j1RQv.js";document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".menu-toggle"),r=document.querySelector(".menu");n.addEventListener("click",function(){r.classList.toggle("show")})});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("settings-form");n.addEventListener("submit",async function(r){r.preventDefault();const a=localStorage.getItem("user_id");if(!a){o("User ID not found. Please log in again.");return}const u=new FormData(n),t={};if(u.forEach((e,s)=>{t[s]=e}),t.user_id=a,t["new-password"]!==t["confirm-password"]){o("New password and confirm password do not match.");return}try{const e="https://hyte24.northeurope.cloudapp.azure.com/api/users/";console.log("Request URL:",e);const s=localStorage.getItem("token");console.log("Token:",s);const d={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({username:t.username,password:t["new-password"],email:t.email,user_id:a})},c=await fetch(e,d),i=await c.json();if(!c.ok)throw new Error(i.message||"Failed to update user data");n.reset(),o("User data updated successfully!")}catch(e){console.error("Error updating user data:",e),o("Failed to update user data. Please try again.")}})});document.addEventListener("DOMContentLoaded",function(){document.getElementById("delete-user").addEventListener("click",async function(){const r=localStorage.getItem("user_id");if(document.getElementById("delete-confirm").value.toLowerCase()!=="delete user"){o('You must type "delete user" to confirm deletion.');return}if(!confirm("Are you sure you want to delete your account? This cannot be undone."))return;const u=`https://hyte24.northeurope.cloudapp.azure.com/api/users/${r}`,t=localStorage.getItem("token");try{const e=await fetch(u,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await e.json();if(e.ok)o("Account deleted successfully."),localStorage.removeItem("user_id"),localStorage.removeItem("token"),window.location.href="login.html";else throw new Error(s.message||"Failed to delete user account.")}catch{o("Failed to delete user account. Please try again.")}})});document.addEventListener("DOMContentLoaded",function(){document.querySelector(".logout a").addEventListener("click",function(r){r.preventDefault(),o("Logged out"),localStorage.removeItem("user_id"),localStorage.removeItem("token"),setTimeout(()=>{window.location.href="index.html"},2e3)})});
