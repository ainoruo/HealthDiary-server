import"./style-C8ZCfusv.js";import{f as l}from"./fetch-CGUiTqyx.js";import{s as r}from"./toast-B-6j1RQv.js";document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".menu-toggle"),e=document.querySelector(".menu");n.addEventListener("click",function(){e.classList.toggle("show")})});const i=document.querySelector(".loginuser");i.addEventListener("click",async n=>{n.preventDefault();const e="https://hyte24.northeurope.cloudapp.azure.com/api/auth/login",o=document.querySelector(".login_form"),s={username:o.querySelector("input[name=username]").value,password:o.querySelector("input[name=password]").value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};l(e,a).then(t=>{console.log(t),console.log(t.token),localStorage.setItem("token",t.token),t.token==null?r("Unauthorized: username or password incorrect!"):(r(t.message),localStorage.setItem("name",t.user.username),localStorage.setItem("user_id",t.user.user_id),setTimeout(()=>{window.location.href="diary.html"},2e3)),logResponse("loginResponse",`localStorage set with token 
      value: ${t.token}`)})});document.addEventListener("DOMContentLoaded",function(){const n=document.querySelector(".create-user-link"),e=document.getElementById("modal");n.addEventListener("click",function(){e.style.display="block"}),e.querySelector(".close").addEventListener("click",function(){e.style.display="none"}),window.addEventListener("click",function(s){s.target==e&&(e.style.display="none")})});const u=document.querySelector(".createuser");u.addEventListener("click",async n=>{n.preventDefault();const e="https://hyte24.northeurope.cloudapp.azure.com/api/users",o=document.querySelector(".modal-content");if(!o.checkValidity()){o.reportValidity();return}const a={username:o.querySelector("input[name=username]").value,password:o.querySelector("input[name=password]").value,email:o.querySelector("input[name=email]").value},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};try{const c=await l(e,t);console.log(c),c.user_id?(r("User created successfully!"),setTimeout(()=>{window.location.href="index.html"},2e3)):r("Failed to create user. Please try again.")}catch(c){console.error(c),r("Failed to create user. Please try again.")}});
