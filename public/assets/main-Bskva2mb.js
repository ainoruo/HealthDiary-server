import"./style-CNpknRdY.js";import{f as l}from"./fetch-CGUiTqyx.js";import{s}from"./toast-B-6j1RQv.js";document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".menu-toggle"),e=document.querySelector(".menu");o.addEventListener("click",function(){e.classList.toggle("show")})});const u=document.querySelector(".loginuser");u.addEventListener("click",async o=>{o.preventDefault();const e="https://hyte24.northeurope.cloudapp.azure.com/api/auth/login",n=document.querySelector(".login_form"),r={username:n.querySelector("input[name=username]").value,password:n.querySelector("input[name=password]").value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};l(e,a).then(t=>{console.log(t),console.log(t.token),localStorage.setItem("token",t.token),t.token==null?s("Unauthorized: username or password incorrect!"):(s(t.message),localStorage.setItem("name",t.user.username),localStorage.setItem("user_id",t.user.user_id),setTimeout(()=>{window.location.href="diary.html"},2e3)),logResponse("loginResponse",`localStorage set with token 
      value: ${t.token}`)})});document.addEventListener("DOMContentLoaded",function(){const o=document.querySelector(".create-user-link"),e=document.getElementById("modal");o.addEventListener("click",function(){e.style.display="block"}),e.querySelector(".close").addEventListener("click",function(){e.style.display="none"}),window.addEventListener("click",function(r){r.target==e&&(e.style.display="none")})});const i=document.querySelector(".createuser");i.addEventListener("click",async o=>{o.preventDefault();const e="https://hyte24.northeurope.cloudapp.azure.com/api/users",n=document.querySelector(".modal-content"),a={username:n.querySelector("input[name=username]").value,password:n.querySelector("input[name=password]").value,email:n.querySelector("input[name=email]").value},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};try{const c=await l(e,t);console.log(c),c.user_id?(s("User created successfully!"),setTimeout(()=>{window.location.href="index.html"},2e3)):s("Failed to create user. Please try again.")}catch(c){console.error(c),s("Failed to create user. Please try again.")}});
