import"./style-928bxCnj.js";import{f as c}from"./fetch-CGUiTqyx.js";document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector(".info-link"),e=document.getElementById("modal"),n=e.querySelector(".close");r.addEventListener("click",function(o){o.preventDefault(),e.style.display="block"}),n.addEventListener("click",function(){e.style.display="none"}),window.addEventListener("click",function(o){o.target==e&&(e.style.display="none")})});const a=document.querySelector(".loginuser");a.addEventListener("click",async r=>{r.preventDefault();const e="http://localhost:3000/api/auth/login",n=document.querySelector(".login_form"),o={username:n.querySelector("input[name=username]").value,password:n.querySelector("input[name=password]").value},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};c(e,l).then(t=>{console.log(t),console.log(t.token),localStorage.setItem("token",t.token),t.token==null?alert("Unauthorized: username or password incorrect!"):(alert(t.message),localStorage.setItem("name",t.user.username),localStorage.setItem("user_id",t.user.user_id),window.location.href="diary.html"),logResponse("loginResponse",`localStorage set with token 
      value: ${t.token}`)})});document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector(".create-user-link"),e=document.getElementById("modal");r.addEventListener("click",function(){e.style.display="block"}),e.querySelector(".close").addEventListener("click",function(){e.style.display="none"}),window.addEventListener("click",function(o){o.target==e&&(e.style.display="none")})});const i=document.querySelector(".createuser");i.addEventListener("click",async r=>{r.preventDefault();const e="http://127.0.0.1:3000/api/users",n=document.querySelector(".modal-content"),l={username:n.querySelector("input[name=username]").value,password:n.querySelector("input[name=password]").value,email:n.querySelector("input[name=email]").value},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};try{const s=await c(e,t);console.log(s),s.user_id?(alert("User created successfully!"),window.location.href="index.html"):alert("Failed to create user. Please try again.")}catch(s){console.error(s),alert("Failed to create user. Please try again.")}});
